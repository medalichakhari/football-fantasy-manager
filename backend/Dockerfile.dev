FROM node:20

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .
RUN npx prisma generate

# Copy and make start script executable
COPY start-dev.sh ./
RUN chmod +x start-dev.sh

EXPOSE 3001
CMD ["./start-dev.sh"]
